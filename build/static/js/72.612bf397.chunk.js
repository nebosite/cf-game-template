"use strict";(self.webpackChunk_clusterfun_game_template=self.webpackChunk_clusterfun_game_template||[]).push([[72],{72:function(e,t,n){n.r(t),n.d(t,{default:function(){return x}});var a,i,r=n(671),o=n(144),l=n(340),s=n(347),c=n(791),d=n(907),p=n(586),u=n(495),h={gameclient:"Client_gameclient__ybtgH",divRow:"Client_divRow__XE9Um",gametitle:"Client_gametitle__JGNoT",topbar:"Client_topbar__2aGHN",quitbutton:"Client_quitbutton__iFP-Y",gameCanvasFrame:"Client_gameCanvasFrame__6cUpO"},v=n(694),m=n.n(v),f=n(184),g=(0,d.f3)("appModel")(a=(0,d.Pi)(a=function(e){(0,l.Z)(n,e);var t=(0,s.Z)(n);function n(e){var a;return(0,r.Z)(this,n),(a=t.call(this,e)).canvasDomId=void 0,a.w=100,a.h=100,a.canvasContext=void 0,a.animateFrame=function(e){var t=a.props.appModel;if((null===t||void 0===t?void 0:t.gameState)===p.Vh.Playing&&a.canvasContext){a.canvasContext.fillStyle="#000000",a.canvasContext.fillRect(0,0,a.w,a.h),t.gameThink(e);var n=t.ballData;a.canvasContext.fillStyle=n.color,a.canvasContext.fillRect(n.x*a.w-30,n.y*a.h-30,60,60)}},e.appModel.onTick.subscribe("animate",(function(e){return a.animateFrame(e)})),a.canvasDomId="PlayCanvas"+a.props.appModel.playerId,a}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var e,t=document.getElementById(this.canvasDomId);this.canvasContext=null!==(e=t.getContext("2d"))&&void 0!==e?e:void 0,this.w=t.width,this.h=t.height}},{key:"handleClick",value:function(e,t){var n=this.props.appModel;n.ballData.x=e,n.ballData.y=t,n.doTap(e,t)}},{key:"render",value:function(){var e=this,t=this.props.appModel;return t?(0,f.jsxs)("div",{children:[(0,f.jsx)("h4",{children:t.playerName}),(0,f.jsxs)("div",{children:["Tap the screen to set dot position",(0,f.jsx)("div",{className:h.gameCanvasFrame,children:(0,f.jsx)(u.ez,{canvasId:this.canvasDomId,width:800,height:800,onClick:function(t,n){return e.handleClick(t,n)}})}),(0,f.jsx)("button",{className:h.clientButton,onClick:function(){return e.props.appModel.doColorChange()},children:"Change Colors"}),(0,f.jsx)("button",{className:h.clientButton,onClick:function(){return e.props.appModel.doMessage()},children:"Say Something"})]})]}):(0,f.jsx)("div",{children:"NO APPMODEL"})}}]),n}(c.Component))||a)||a,x=(0,d.f3)("appModel")(i=(0,d.Pi)(i=function(e){(0,l.Z)(n,e);var t=(0,s.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).lastState=u.nd.Unknown,e.containerOffset={left:0,top:0},e}return(0,o.Z)(n,[{key:"componentDidUpdate",value:function(){var e=document.getElementById(this.props.uiProperties.containerId);if(e){var t=e.getBoundingClientRect();this.containerOffset={left:t.left,top:t.top}}}},{key:"alertUser",value:function(){var e=this.props.appModel;e.gameState!==this.lastState&&u.u0.vibrate([50,50,50,50]),this.lastState=e.gameState}},{key:"renderSubScreen",value:function(){var e=this,t=this.props.appModel;switch(console.log("RENDERING WITH GAME STATE: ".concat(null===t||void 0===t?void 0:t.gameState)),t.gameState){case u.Lo.WaitingToStart:return(0,f.jsx)(c.Fragment,{children:(0,f.jsx)("div",{className:h.wait_text,children:"Sit tight, we are waiting for the host to start the game..."})});case p.Vh.Playing:return this.alertUser(),(0,f.jsx)(g,{});case p.Vh.EndOfRound:return this.alertUser(),(0,f.jsx)("div",{children:"Round is over... "});case u.nd.GameOver:return(0,f.jsxs)(c.Fragment,{children:[(0,f.jsx)("p",{children:"Game is over, thanks for playing!"}),(0,f.jsx)("div",{children:(0,f.jsx)("button",{onClick:function(){return e.props.appModel.quitApp()},children:"Quit"})})]});case u.Lo.JoinError:return(0,f.jsx)(c.Fragment,{children:(0,f.jsxs)("p",{children:["Could not join the game because: ",this.props.appModel.joinError]})});default:return(0,f.jsx)("div",{children:"These are not the droids you are looking for..."})}}},{key:"render",value:function(){var e=this.props.appModel;return(0,f.jsx)("div",{children:(0,f.jsx)(u.f3,{uiProperties:this.props.uiProperties,virtualHeight:1920,virtualWidth:1080,children:(0,f.jsxs)("div",{className:h.gameclient,children:[(0,f.jsxs)("div",{className:m()(h.divRow,h.topbar),children:[(0,f.jsx)("span",{className:m()(h.gametitle),children:"Templato"}),(0,f.jsx)("span",{children:null===e||void 0===e?void 0:e.playerName}),(0,f.jsx)("button",{className:m()(h.quitbutton),onClick:function(){return null===e||void 0===e?void 0:e.quitApp()},children:"X"})]}),(0,f.jsx)("div",{style:{margin:"100px"},children:(0,f.jsx)(u.SV,{children:this.renderSubScreen()})})]})})})}}]),n}(c.Component))||i)||i}}]);
//# sourceMappingURL=72.612bf397.chunk.js.map